"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["ui_packages_code-view-shared_hooks_use-canonical-object_ts-ui_packages_code-view-shared_utili-228da6"],{39672:(e,t,n)=>{n.d(t,{Z:()=>r});function r({appendQuery:e,retainScrollPosition:t,returnTarget:n}){window.dispatchEvent(new CustomEvent("blackbird_monolith_append_and_focus_input",{detail:{appendQuery:e,retainScrollPosition:t,returnTarget:n}}))}},17480:(e,t,n)=>{n.d(t,{p:()=>i});var r=n(96540);function i(e){let t=(0,r.useRef)([]);for(let n of t.current)if(e===n||function e(t,n){if(t===n)return!0;if("object"!=typeof t||typeof t!=typeof n||!t||!n)return!1;if(Array.isArray(t)){if(!Array.isArray(n)||t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!e(t[r],n[r]))return!1;return!0}let r=Object.keys(t),i=Object.keys(n);if(r.length!==i.length)return!1;for(let i of r)if(!e(t[i],n[i]))return!1;return!0}(n,e))return n;return t.current.unshift(e),t.current.length>5&&t.current.pop(),e}},61836:(e,t,n)=>{n.d(t,{T:()=>d});var r=n(89504),i=n(83056),a=n(15820),l=n(71312),o=n(28784),s=n(96540),c=n(86584);function d(){let{sendAnalyticsEvent:e}=(0,l.s)(),t=function(){let e=function(){let e=(0,r.t)(),t=(0,c.i)();return(0,s.useMemo)(()=>({react_app:"code-view",repository_id:e.id,repository_nwo:`${e.ownerLogin}/${e.name}`,repository_public:e.public,repository_is_fork:e.isFork,actor_id:t?.id,actor_login:t?.login}),[e,t])}(),t=(0,r.t)(),n=(0,i.yH8)(i.tTz,{owner:t.ownerLogin,repo:t.name});return(0,s.useCallback)((t,r,i)=>{let a={target:t,interaction:r,context:i,...e,url:window.location.href,user_agent:window.navigator.userAgent,browser_width:window.innerWidth,browser_languages:window.navigator.languages.join(",")};(0,o.lS)(n,{method:"POST",body:a})},[e,n])}(),n=(0,a.u)("code_nav_ui_events");return{sendRepoClickEvent:(0,s.useCallback)((r,i={})=>{e("repository.click",r,i),n&&t(r,"click",i)},[e,t,n]),sendRepoKeyDownEvent:(0,s.useCallback)((r,i={})=>{e("repository.keydown",r,i),n&&t(r,"keydown",i)},[e,t,n]),sendStats:(0,s.useCallback)((r,i={})=>{e(r,"",i),n&&t(r,"stats",i)},[e,t,n]),sendMarketplaceActionEvent:(0,s.useCallback)((t,n={})=>{e("marketplace.action.click",t,n)},[e])}}},18704:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(57294),i=n(89504),a=n(83056),l=n(95140),o=n(96540);function s(){let e=(0,i.t)(),{path:t,action:n,refInfo:s}=(0,r.eu)(),[c]=(0,l.I)(()=>!1,!0,[]);function d(e){return e?`?${e}`:""}function u(e){return c?"":void 0===e?window.location.hash:e?`#${e}`:""}return{getItemUrl:o.useCallback(t=>(0,a.IO9)({repo:e,commitish:s.name,action:"directory"===t.contentType?"tree":"blob",path:t.path}),[e.ownerLogin,e.name,s.name]),getUrl(r={}){let i=(0,a.IO9)({repo:e,commitish:r.commitish||s.name,action:r.action||n,path:r.path||t})+function({params:e,hash:t}){return d(e)+u(t)}(r);return r.absolute?new URL(i,window.location.origin).href:i},createPermalink(r={}){let i=(0,a.IO9)({repo:e,commitish:s.currentOid,action:r.action||n,path:r.path||t})+function({params:e,hash:t}){return d(e)+u(t)}(r);return r.absolute?new URL(i,window.location.origin).href:i},isCurrentPagePermalink:()=>!c&&s.name===s.currentOid&&window.location.pathname.includes(s.currentOid)}}},80838:(e,t,n)=>{n.d(t,{E:()=>r});let r={"&:hover:not([disabled])":{textDecoration:"none"},"&:focus:not([disabled])":{textDecoration:"none"},"&:active:not([disabled])":{textDecoration:"none"}}},42661:(e,t,n)=>{var r,i;function a(e){return"blob"in e}function l(e){return a(e)&&"blame"in e}function o(e){return"deleteInfo"in e&&"webCommitInfo"in e}function s(e){return"editInfo"in e&&"webCommitInfo"in e}function c(e){return"tree"in e}n.d(t,{fP:()=>i,KR:()=>l,mM:()=>a,iS:()=>o,di:()=>s,Hf:()=>c}),function(e){e.FALSE_POSITIVE="false_positive",e.USED_IN_TESTS="used_in_tests",e.WILL_FIX_LATER="will_fix_later"}(r||(r={})),function(e){e.README="readme",e.CODE_OF_CONDUCT="code_of_conduct",e.LICENSE="license",e.SECURITY="security"}(i||(i={}))},73480:(e,t,n)=>{function r(e){return i(e)[0]}function i(e){let t=[];for(let n of function(){try{return document.cookie.split(";")}catch{return[]}}()){let[r,i]=n.trim().split("=");e===r&&void 0!==i&&t.push({key:r,value:i})}return t}function a(e,t,n=null,r=!1,i="lax"){let a=document.domain;if(null==a)throw Error("Unable to get document domain");a.endsWith(".github.com")&&(a="github.com");let l="https:"===location.protocol?"; secure":"",o=n?`; expires=${n}`:"";!1===r&&(a=`.${a}`);try{document.cookie=`${e}=${t}; path=/; domain=${a}${o}${l}; samesite=${i}`}catch{}}function l(e,t=!1){let n=document.domain;if(null==n)throw Error("Unable to get document domain");n.endsWith(".github.com")&&(n="github.com");let r=new Date(Date.now()-1).toUTCString(),i="https:"===location.protocol?"; secure":"",a=`; expires=${r}`;!1===t&&(n=`.${n}`);try{document.cookie=`${e}=''; path=/; domain=${n}${a}${i}`}catch{}}n.d(t,{OR:()=>i,Ri:()=>r,TV:()=>a,Yj:()=>l})},51888:(e,t,n)=>{function r(e){return`line-${e}`}function i(e,t,n){return`${e}${"left"===t?"L":"R"}${n}`}function a(e){return"DELETION"===e?"left":"right"}function l(e,t=!1,n=!1){if(n)return"var(--bgColor-attention-muted, var(--color-attention-subtle))";switch(e){case"ADDITION":return t?"var(--diffBlob-additionNum-bgColor, var(--diffBlob-addition-bgColor-num))":"var(--diffBlob-additionLine-bgColor, var(--diffBlob-addition-bgColor-line))";case"DELETION":return t?"var(--diffBlob-deletionNum-bgColor, var(--diffBlob-deletion-bgColor-num))":"var(--diffBlob-deletionLine-bgColor, var(--diffBlob-deletion-bgColor-line))";case"HUNK":return t?"var(--diffBlob-hunkNum-bgColor, var(--diffBlob-hunk-bgColor-num))":"var(--diffBlob-hunkLine-bgColor, var(--bgColor-accent-muted))";case"EMPTY":return t?"var(--diffBlob-emptyNum-bgColor, var(--diffBlob-hunk-bgColor-num))":"var(--diffBlob-emptyLine-bgColor, var(--bgColor-accent-muted))";default:return}}function o(e){let t=0;if(e)for(let n of e)t=Math.max(t,n?.left??0,n?.right??0);return Math.max(8*t.toString().length+20,40).toString()}n.d(t,{IQ:()=>i,Sq:()=>r,XU:()=>a,c7:()=>o,gK:()=>l})},94640:(e,t,n)=>{n.d(t,{Jg:()=>c,nq:()=>u,uP:()=>f.u,zl:()=>h.z,$e:()=>y,P3:()=>p,wj:()=>g,l4:()=>N,Qe:()=>b,Ah:()=>I});var r=n(74848),i=n(20053),a=n(22084),l=n(51888);let o=e=>{let{dragging:t,isHighlighted:n,isLeftColumn:o,colSpan:s,line:c,lineAnchor:d}=e,u=c.html,f="";return["ADDITION","DELETION"].includes(c.type)&&["+","-"].includes(u[0])&&(f=u[0],u=u.slice(1)),(0,r.jsx)("td",{className:(0,i.$)("diff-text-cell",{"border-left color-border-accent-emphasis":t&&n,"border-right":o&&"HUNK"!==c.type}),colSpan:s,id:d?(0,l.Sq)(d):void 0,style:{backgroundColor:(0,l.gK)(c.type,!1,n)},children:(0,r.jsxs)("code",{"data-code-marker":f,className:(0,i.$)("diff-text syntax-highlighted-line",{addition:"ADDITION"===c.type,deletion:"DELETION"===c.type}),children:[e.lineChild,(0,r.jsx)(a.mo,{className:(0,i.$)("diff-text-inner",{"color-fg-muted":"HUNK"===c.type}),html:u,style:{marginLeft:"CONTEXT"===c.type?"-7px":void 0}})]})})};try{o.displayName||(o.displayName="DiffText")}catch{}let s=({ariaLabel:e,children:t,hasExpanderButton:n,lineType:a,colSpan:o,interactiveProps:s,isHighlighted:c,...d})=>{let u=(0,r.jsx)("code",{className:"pr-2",children:t});return s&&(u=(0,r.jsx)("button",{className:"diff-line-number-button",...s,"aria-label":e,children:u})),(0,r.jsx)("td",{"aria-label":s?void 0:e,"data-line-number":!0,className:(0,i.$)("diff-line-number",{"has-expander":n,clickable:!!s}),colSpan:o||1,style:{backgroundColor:(0,l.gK)(a,!0,c)},...d,children:u})};try{s.displayName||(s.displayName="LineNumber")}catch{}let c=({dragging:e,isHighlighted:t,isLeftColumn:n,isSplit:i,lineAnchor:a,line:l,lineChild:c,onLineNumberClick:d})=>{let u="CONTEXT"===l.type||"INJECTED_CONTEXT"===l.type,f="ADDITION"!==l.type,h=f||!i,m="DELETION"!==l.type,p=m&&!u||!i,x=i&&u?n?l.left:l.right:l.left;return(0,r.jsxs)(r.Fragment,{children:[h&&(0,r.jsx)(s,{ariaLabel:`Line ${f?l.left?.toString():l.right?.toString()}`,lineType:l.type,interactiveProps:d?{onClick:d}:null,isHighlighted:t,children:f&&x}),p&&(0,r.jsx)(s,{ariaLabel:`Line ${m?l.right?.toString():l.left?.toString()}`,lineType:l.type,interactiveProps:d?{onClick:d}:null,isHighlighted:t,children:m&&l.right}),(0,r.jsx)(o,{dragging:e,isHighlighted:t,isLeftColumn:n,line:l,lineAnchor:a,lineChild:c})]})};try{c.displayName||(c.displayName="DiffLinePart")}catch{}var d=n(75177);function u(){return(0,r.jsx)(d.A,{"aria-hidden":"true",as:"svg",version:"1.1",viewBox:"0 0 340 84",xmlns:"http://www.w3.org/2000/svg",sx:{bottom:"0 !important",clip:"rect(1px, 1px, 1px, 1px)",clipPath:"inset(50%)",height:"84px",position:"absolute",width:"320px"},children:(0,r.jsxs)("defs",{children:[(0,r.jsxs)("clipPath",{id:"diff-placeholder",children:[(0,r.jsx)("rect",{height:"11.9298746",rx:"2",width:"67.0175439",x:"0",y:"0"}),(0,r.jsx)("rect",{height:"11.9298746",rx:"2",width:"100.701754",x:"18.9473684",y:"47.7194983"}),(0,r.jsx)("rect",{height:"11.9298746",rx:"2",width:"37.8947368",x:"0",y:"71.930126"}),(0,r.jsx)("rect",{height:"11.9298746",rx:"2",width:"53.3333333",x:"127.017544",y:"48.0703769"}),(0,r.jsx)("rect",{height:"11.9298746",rx:"2",width:"72.9824561",x:"187.719298",y:"48.0703769"}),(0,r.jsx)("rect",{height:"11.9298746",rx:"2",width:"140.350877",x:"76.8421053",y:"0"}),(0,r.jsx)("rect",{height:"11.9298746",rx:"2",width:"140.350877",x:"17.8947368",y:"23.8597491"}),(0,r.jsx)("rect",{height:"11.9298746",rx:"2",width:"173.684211",x:"166.315789",y:"23.8597491"})]}),(0,r.jsxs)("linearGradient",{id:"animated-diff-gradient",spreadMethod:"reflect",x1:"0",x2:"0",y1:"0",y2:"1",children:[(0,r.jsx)("stop",{offset:"0",stopColor:"#eee"}),(0,r.jsx)("stop",{offset:"0.2",stopColor:"#eee"}),(0,r.jsx)("stop",{offset:"0.5",stopColor:"#ddd"}),(0,r.jsx)("stop",{offset:"0.8",stopColor:"#eee"}),(0,r.jsx)("stop",{offset:"1",stopColor:"#eee"}),(0,r.jsx)("animateTransform",{attributeName:"y1",dur:"1s",repeatCount:"3",values:"0%; 100%; 0"}),(0,r.jsx)("animateTransform",{attributeName:"y2",dur:"1s",repeatCount:"3",values:"100%; 200%; 0"})]})]})})}try{u.displayName||(u.displayName="DiffPlaceholder")}catch{}var f=n(73560),h=n(97394),m=n(38621);function p({currentLine:e,hunkButton:t,isLeftColumn:n,isSplit:i}){return i&&!n?null:(0,r.jsxs)(r.Fragment,{children:[t?(0,r.jsx)(s,{colSpan:i?1:2,hasExpanderButton:!0,lineType:e.type,children:t}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s,{lineType:e.type,children:(0,r.jsx)(m.KebabHorizontalIcon,{})}),!i&&(0,r.jsx)(s,{lineType:e.type,children:(0,r.jsx)(m.KebabHorizontalIcon,{})})]}),(0,r.jsx)(o,{isHighlighted:!1,isLeftColumn:!0,colSpan:i?3:void 0,line:e})]})}try{p.displayName||(p.displayName="HunkHeaderDiffLine")}catch{}function x(){return(0,r.jsx)("div",{className:"hunk-kebab-icon pr-2 pb-1",children:(0,r.jsx)(m.KebabHorizontalIcon,{})})}try{x.displayName||(x.displayName="HunkKebabIcon")}catch{}function y({isLeftColumn:e}){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s,{lineType:"EMPTY"}),(0,r.jsx)("td",{className:(0,i.$)("empty-diff-line",{"border-right":e}),colSpan:1})]})}try{y.displayName||(y.displayName="EmptyDiffLine")}catch{}function g(e){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("thead",{className:"sr-only",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{scope:"col",children:"Original file line number"}),(0,r.jsx)("th",{scope:"col",children:"Original file line"}),(0,r.jsx)("th",{scope:"col",children:"Diff line number"}),(0,r.jsx)("th",{scope:"col",children:"Diff line change"})]})}),(0,r.jsxs)("colgroup",{children:[(0,r.jsx)("col",{width:e.lineWidth}),(0,r.jsx)("col",{}),(0,r.jsx)("col",{width:e.lineWidth}),(0,r.jsx)("col",{})]}),(0,r.jsx)("tbody",{children:e.children})]})}try{g.displayName||(g.displayName="SplitDiffTable")}catch{}function b(e){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("thead",{className:"sr-only",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{scope:"col",children:"Original file line number"}),(0,r.jsx)("th",{scope:"col",children:"Diff line number"}),(0,r.jsx)("th",{scope:"col",children:"Diff line change"})]})}),(0,r.jsxs)("colgroup",{children:[(0,r.jsx)("col",{width:e.lineWidth}),(0,r.jsx)("col",{width:e.lineWidth}),(0,r.jsx)("col",{width:"100%"})]}),(0,r.jsx)("tbody",{children:e.children})]})}try{b.displayName||(b.displayName="UnifiedDiffTable")}catch{}let w={diffTextCell:"UnifiedDiffLines-module__diffTextCell--UAuIr",diffHunkCell:"UnifiedDiffLines-module__diffHunkCell--qPkzg",diffHunkText:"UnifiedDiffLines-module__diffHunkText--Sfwuu",diffTextInner:"UnifiedDiffLines-module__diffTextInner--IuEAA",diffTextMarker:"UnifiedDiffLines-module__diffTextMarker--MdAo4",syntaxHighlightedAdditionLine:"UnifiedDiffLines-module__syntaxHighlightedAdditionLine--lU_S2",syntaxHighlightedDeletionLine:"UnifiedDiffLines-module__syntaxHighlightedDeletionLine--xgQwN",diffLineNumber:"UnifiedDiffLines-module__diffLineNumber--bzzxf"};function v({line:e,children:t}){return(0,r.jsx)("td",{className:w.diffLineNumber,style:{backgroundColor:(0,l.gK)(e.type,!0),textAlign:"center"},children:(0,r.jsx)("code",{children:t})})}function j({line:e}){return(0,r.jsx)("td",{colSpan:4,className:w.diffHunkCell,valign:"top",children:(0,r.jsxs)("div",{className:"d-flex flex-row",children:[(0,r.jsx)(x,{}),(0,r.jsx)("code",{className:w.diffHunkText,children:(0,r.jsx)(a.mo,{className:(0,i.$)(w.diffTextInner,"color-fg-muted"),html:e.html})})]})})}function C({line:e}){let t="HUNK"===e.type,n="ADDITION"!==e.type,o="DELETION"!==e.type,s="ADDITION"===e.type?"+":"DELETION"===e.type?"-":void 0;return(0,r.jsxs)("tr",{children:[t&&(0,r.jsx)(j,{line:e}),!t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v,{line:e,children:n&&e.left}),(0,r.jsx)(v,{line:e,children:o&&e.right}),(0,r.jsx)("td",{className:w.diffTextCell,style:{backgroundColor:(0,l.gK)(e.type,!1)},children:(0,r.jsxs)("code",{className:(0,i.$)("ADDITION"===e.type&&w.syntaxHighlightedAdditionLine,"DELETION"===e.type&&w.syntaxHighlightedDeletionLine),children:[!!s&&(0,r.jsx)("span",{className:w.diffTextMarker,children:s}),(0,r.jsx)(a.mo,{className:w.diffTextInner,html:e.html,style:{backgroundColor:(0,l.gK)(e.type,!1)}})]})})]})]})}function N({sx:e,lines:t,lineWidth:n,tabSize:i}){let a=t.map((e,t)=>(0,r.jsx)(C,{line:e,tabSize:i},t));return(0,r.jsx)(d.A,{as:"table",className:"tab-size","data-tab-size":i,sx:{borderTop:0,borderBottom:0,borderLeft:1,borderRight:1,borderStyle:"solid",borderColor:"border.muted",...e},children:(0,r.jsx)(b,{lineWidth:n,children:a})})}try{v.displayName||(v.displayName="LineNumberCell")}catch{}try{j.displayName||(j.displayName="HunkCell")}catch{}try{C.displayName||(C.displayName="UnifiedDiffRow")}catch{}try{N.displayName||(N.displayName="UnifiedDiffLines")}catch{}function k(e){return"LEFT"===e?"-":"RIGHT"===e?"+":""}function I({startDiffSide:e,endDiffSide:t,originalStartLine:n,originalEndLine:r}){return e&&t&&"number"==typeof n&&"number"==typeof r?0===n&&1===r&&e===t?"-1 to +1":e===t&&n===r?`${k(e)}${n}`:`${k(e)}${n} to ${k(t)}${r}`:""}},60188:(e,t,n)=>{n.d(t,{D:()=>a});var r=n(7572),i=n(97156);function a(e){if(!i.XC)return;let t=i.XC.querySelector("title"),n=i.XC.createElement("title");n.textContent=e,t?t.textContent!==e&&(t.replaceWith(n),(0,r.i)(e)):(i.XC.head.appendChild(n),(0,r.i)(e))}},77504:(e,t,n)=>{n.d(t,{Nq:()=>M,H:()=>p,c2:()=>eo,Uy:()=>W,qn:()=>ex});var r=n(74848),i=n(28910),a=n(62353),l=n(35558),o=n(95140),s=n(38621),c=n(55847),d=n(20053),u=n(96540);let f={expandButton:"ExpandFileTreeButton-module__expandButton--gL4is",filesButtonBreakpoint:"ExpandFileTreeButton-module__filesButtonBreakpoint--WfX9t"},h=u.forwardRef(({expanded:e,onToggleExpanded:t,className:n,ariaControls:u,textAreaId:h,useFilesButtonBreakpoint:m=!0,variant:p,getTooltipDirection:x},y)=>{let{toggleTreeShortcut:g}=(0,a.wk)(),[b]=(0,o.I)(()=>!1,!0,[]),w=x?.(e)??"se";return(0,r.jsxs)(r.Fragment,{children:[m&&(!e||b)&&(0,r.jsx)(c.Q,{"aria-label":"Expand file tree",leadingVisual:s.ArrowLeftIcon,"data-hotkey":g.hotkey,"data-testid":"expand-file-tree-button-mobile",ref:y,onClick:t,variant:p??"invisible",sx:{color:"fg.muted",px:2,display:"none","@media screen and (max-width: 768px)":{display:"block"}},children:"Files"}),(0,r.jsx)(l.L,{dataHotkey:g.hotkey,className:(0,d.$)({[n??""]:!0,"position-relative":!0,[f.expandButton]:!0,[f.filesButtonBreakpoint]:m&&(!e||b)}),expanded:e,alignment:"left",ariaLabel:e?"Collapse file tree":"Expand file tree",tooltipDirection:w,testid:"file-tree-button",ariaControls:u,ref:y,variant:p,onToggleExpanded:t}),(0,r.jsx)(i._,{buttonFocusId:h,buttonHotkey:g.hotkey,onButtonClick:t,onlyAddHotkeyScopeButton:!0})]})});h.displayName="ExpandFileTreeButton";var m=n(61836);function p({inputRef:e,onFindFilesShortcut:t,textAreaId:n}){let{sendRepoKeyDownEvent:l}=(0,m.T)(),{findFilesShortcut:o}=(0,a.wk)();return(0,r.jsx)(i._,{buttonFocusId:n,buttonHotkey:o.hotkey,onButtonClick:()=>{t?.(),e?.current?.focus(),l("GO_TO_FILE")}})}try{p.displayName||(p.displayName="FindFilesShortcut")}catch{}var x=n(28610),y=n(42573),g=n(43772),b=n(20864),w=n(18704),v=n(51848),j=n(83056),C=n(56226),N=n(42024),k=n(18212),I=n(28784),R=n(69676),T=n(75177),E=n(87330),S=n(93653),F=n(42141),_=n(94977),A=n(30729),D=n(27104);let L=(0,u.createContext)({knownFolders:new Map,dispatchKnownFolders:()=>{}});try{L.displayName||(L.displayName="FileTreeContext")}catch{}var O=n(57294),$=n(68976),P=n(27500),q=n(27788),B=n(56511),H=n(38553);let U=(0,u.createContext)({});function M({children:e}){let t=(0,u.useRef)(!1),n=(0,u.useRef)(!1),i=(0,u.useRef)(!0),a=(0,u.useCallback)(e=>{t.current=e},[]),l=(0,u.useCallback)(e=>{n.current=e},[]),o=(0,u.useCallback)(e=>{i.current=e},[]),s=(0,u.useMemo)(()=>({expandAllFolders:t,refreshTree:n,shouldFetchFolders:i,setExpandAllFolders:a,setRefreshTree:l,setShouldFetchFolders:o}),[a,l,o]);return(0,r.jsx)(U.Provider,{value:s,children:e})}function W(){return(0,u.useContext)(U)}try{U.displayName||(U.displayName="FileTreeControlContext")}catch{}try{M.displayName||(M.displayName="FileTreeControlProvider")}catch{}var z=n(65556);function G(e,t,n){let r=[];for(let i of t)if(i.startsWith(e)){let t=i.slice(e.length+1),a=t.indexOf("/"),l=a>0?t.slice(0,a):t,o=`${e}/${l}`;if(n&&n.some(e=>e.path===o))continue;let s={items:[],data:{contentType:o===i?"file":"directory",name:l,path:o,isClientOnly:!0}};r.push(s)}return r}function K(e,t,n){e.data.name=e.data.name.slice(e.data.name.lastIndexOf("/")+1,e.data.name.length);let r=t.name.slice(0,t.name.lastIndexOf("/")),i=r.indexOf("/")>-1,a={path:t.path.slice(0,t.path.lastIndexOf("/")),contentType:t.contentType,name:r,hasSimplifiedPath:i},l={items:[e],data:a};return(n.set(a.path,l),i)?K(l,{...a},n):l}function V(e,t,n,r){if(!e)return{newRootItems:n,rootItemsUpdated:!1};let i=!!e[""]&&Z("",t,n,e[""].items);for(let i of(r?.(n),Object.keys(e).sort()))if(i){let n=t.get(i);n&&(Z(i,t,n.items,e[i].items,r),n.data.totalCount=e[i].totalCount)}return{newRootItems:n,rootItemsUpdated:i}}function Z(e,t,n,r,i){let a=!1;for(let l of r){let r=e?`${e}/${l.name}`:l.name;if(!t.get(r)){let e={items:[],data:{...l}};if(t.set(r,e),l.hasSimplifiedPath){let r=K(e,l,t),o=n.findIndex(e=>e.data.path===r.data.path);-1!==o?r.items.length>n[o].items.length&&(n[o]=r,a=!0):(n.push(r),i?.(n))}else n.push(e),i?.(n)}}return a}function X({isActive:e,file:t,onItemSelected:n,getItemUrl:i,selectedItemRef:a,navigate:l,onRenderRow:o,getFileTrailingVisual:c,getFileIcon:d}){let{sendRepoClickEvent:f}=(0,m.T)(),h=u.useRef(null),p=(0,P.Z)({focusRowRef:h,mouseRowRef:h}),x="submodule"===t.data.contentType,y=c?.(t.data),g=u.useCallback(r=>{x?(r.preventDefault(),t.data.submoduleUrl&&(window.location.href=t.data.submoduleUrl)):r.metaKey||r.ctrlKey||1===r.button?(window.open(i(t.data),"_blank"),r.preventDefault()):e?r.preventDefault():(n?.(),f("FILES_TREE.ITEM",{item_path:t.data.path}),l(i(t.data)),r.stopPropagation())},[t.data,i,e,x,l,n,f]);return o?.(),(0,r.jsxs)(B.G.Item,{ref:h,onSelect:g,current:e,id:`${t.data.path}-item`,containIntrinsicSize:e?void 0:"auto 2rem",children:[(0,r.jsx)(B.G.LeadingVisual,{children:d?d(t.data):x?(0,r.jsx)(s.FileSubmoduleIcon,{}):(0,r.jsx)(s.FileIcon,{})}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{ref:a,style:{color:x?"var(--fgColor-accent, var(--color-accent-fg))":void 0},children:t.data.name}),p&&(0,r.jsx)($.m,{"data-testid":`${t.data.name}-item-tooltip`,id:`${t.data.name}-item-tooltip`,contentRef:h,"aria-label":t.data.name,open:!0,direction:"ne"})]}),!!y?.screenReaderText&&(0,r.jsx)("span",{className:"sr-only",children:y.screenReaderText}),!!y?.trailingVisual&&(0,r.jsx)(B.G.TrailingVisual,{children:y.trailingVisual})]})}let Y=u.memo(X);function Q({clientOnlyFilePaths:e,directory:t,isActive:n,isAncestorOfActive:i,leadingPath:a="",onItemSelected:l,dispatchKnownFolders:o,getItemUrl:s,getFetchUrl:c,selectedItemRef:d,navigate:f,onRenderRow:h,getFileTrailingVisual:p,getFileIcon:x,navigateOnClick:y=!0}){let{expandAllFolders:g,shouldFetchFolders:b}=W(),[w,v]=(0,u.useState)(g?.current||i),{sendRepoClickEvent:j}=(0,m.T)(),C=u.useRef(null),N=u.useRef(null),k=(0,P.Z)({focusRowRef:N,mouseRowRef:C}),[R,T,E,S,F,_,A]=function(e,t,n){let[r,i]=u.useState(e.items),[a,l]=u.useState(e.data.totalCount||0),[o,s]=u.useState(!1),[c,d]=u.useState(!1),{safeSetTimeout:f}=(0,z.A)();u.useEffect(()=>{i(e.items)},[e.items]),u.useEffect(()=>{void 0!==e.data.totalCount&&l(e.data.totalCount)},[e.data.totalCount]);let h=u.useCallback(()=>{d(!1)},[]),m=u.useCallback((e,t)=>{let n=e||[...r];i(n.slice(0,100)),f(()=>{i(n),void 0!==t&&l(t)},1)},[r,f]);return[u.useCallback(async r=>{let a=new Map;if(e.data.isClientOnly){if(r){let n=G(e.data.path,r);for(let e of n)a.set(e.data.path,e);t({type:"add",folders:a,processingTime:0}),n.length>100?m(n,n.length):(i(n),l(n.length))}}else{let o=n(e.data);d(!1),s(!0);let c=Date.now(),u=await (0,I.lS)(`${o}?noancestors=1`);try{if(u.ok){let n=await u.json(),o=n.payload.tree.items.map(e=>{let t={items:[],data:{...e},autoExpand:"directory"===e.contentType&&1===n.payload.tree.items.length};return(a.set(e.path,t),e.hasSimplifiedPath)?K(t,e,a):t});if(r){let t=e.data.path,i=G(t,r,n.payload.tree.items);for(let e of(o.push(...i),i))a.set(e.data.path,e)}t({type:"add",folders:a,processingTime:Date.now()-c}),e.items=o,e.data.totalCount=n.payload.tree.totalCount,o.length>100?m(o,n.payload.tree.totalCount):(i(o),l(n.payload.tree.totalCount))}else d(!0)}catch{d(!0)}}s(!1)},[n,e,t,m]),m,r,o,c,h,a]}(t,o,c),D=A-E.length,L=a?`${a}/`:"";(0,u.useEffect)(()=>{g?.current&&!w&&v(!0)},[t,g,w]);let O=u.useCallback(r=>{g?.current&&(g.current=!1),!r||w||S||F||(t.items.length>100?T():0!==t.items.length||n||i||b?.current===!1||R(e)),r!==w&&v(r)},[g,w,S,F,t.items.length,n,i,b,T,R,e]),q=u.useCallback(e=>{e.metaKey||e.ctrlKey||1===e.button&&y?(window.open(s(t.data),"_blank"),e.preventDefault()):n?e.preventDefault():(l?.(),j("FILES_TREE.ITEM",{item_path:t.data.path}),y?f(s(t.data)):O?.(!w),e.stopPropagation())},[t.data,s,n,w,f,y,l,O,j]);u.useEffect(()=>{i&&!w&&O?.(!0)},[i]),u.useEffect(()=>{0===t.items.length&&w?O?.(!1):!w&&t.autoExpand&&O?.(!0)},[t.items.length]);let H=u.useCallback(e=>{d&&n&&d(e),C.current=e},[d,n]);return 1===t.items.length&&"directory"===t.items[0].data.contentType?(0,r.jsx)(et,{clientOnlyFilePaths:e,directoryItems:t.items,leadingPath:L+t.data.name,inheritsActive:n,dispatchKnownFolders:o,onItemSelected:l,selectedItemRef:d,getItemUrl:s,directoryNavigateOnClick:y,getFileTrailingVisual:p,getFileIcon:x}):(h?.(),(0,r.jsxs)(B.G.Item,{ref:N,expanded:w,onExpandedChange:O,current:n,onSelect:q,id:`${t.data.path}-item`,containIntrinsicSize:n?void 0:"auto 2rem",children:[(0,r.jsx)(B.G.LeadingVisual,{children:(0,r.jsx)(B.G.DirectoryIcon,{})}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("span",{ref:H,children:[L,t.data.name]}),k&&(0,r.jsx)($.m,{"data-testid":`${t.data.name}-directory-item-tooltip`,id:`${t.data.name}-directory-item-tooltip`,contentRef:N,"aria-label":`${L}${t.data.name}`,open:!0,direction:"ne"})]}),(0,r.jsx)(B.G.SubTree,{state:S?"loading":F?"error":"done",children:F?(0,r.jsx)(B.G.ErrorDialog,{onRetry:R,onDismiss:_,children:"There was an error loading the folder contents."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(et,{clientOnlyFilePaths:e,directoryItems:E,dispatchKnownFolders:o,onItemSelected:l,selectedItemRef:d,getItemUrl:s,directoryNavigateOnClick:y,getFileTrailingVisual:p,getFileIcon:x}),D>0&&(0,r.jsx)(er,{message:`${D} entries not shown`})]})})]}))}let J=u.memo(Q);function ee({clientOnlyFilePaths:e,directoryItems:t,leadingPath:n,inheritsActive:i,onItemSelected:a,dispatchKnownFolders:l,selectedItemRef:o,onRenderRow:s,getItemUrl:c,getFileTrailingVisual:d,getFileIcon:f,directoryNavigateOnClick:h=!0}){let{path:m}=(0,O.eu)(),p=(0,w.Z)(),x=(0,q.Z)(),y=u.useRef(x);return(0,r.jsx)(r.Fragment,{children:t.map(t=>{let u=m===t.data.path,x=u||m.startsWith(`${t.data.path}/`);return"directory"===t.data.contentType?(0,r.jsx)(J,{clientOnlyFilePaths:e,isActive:i||u,isAncestorOfActive:x,onItemSelected:a,leadingPath:n,directory:t,dispatchKnownFolders:l,getItemUrl:c,getFetchUrl:p.getItemUrl,selectedItemRef:x?o:void 0,navigate:y.current,onRenderRow:s,navigateOnClick:h,getFileTrailingVisual:d,getFileIcon:f,itemCount:t.items.length},t.data.name):(0,r.jsx)(Y,{onItemSelected:a,file:t,isActive:u,getItemUrl:c,selectedItemRef:u?o:void 0,navigate:y.current,onRenderRow:s,getFileTrailingVisual:d,getFileIcon:f},t.data.name)})})}let et=u.memo(ee);function en(e){let{clientOnlyFilePaths:t,data:n,rootItems:i,setRootItems:a,fetchError:l,processingTime:o,loading:s,onRenderRow:c,getItemUrl:d,getFileTrailingVisual:f,getFileIcon:h,sortDirectoryItems:m}=e,{knownFolders:p,dispatchKnownFolders:x}=(0,u.useContext)(L),{refreshTree:y}=W();u.useEffect(()=>{if(s)return;let e=new Map,t=[];y?.current||(e=new Map(p),t=i.slice());let{newRootItems:r,rootItemsUpdated:l}=V(n,e,t,m);(r.length>i.length||l||y?.current)&&a(r),(e.size>p.size||y?.current)&&x({type:"set",folders:e,processingTime:o}),y?.current&&(y.current=!1)},[n,s]);let g=u.useCallback(e=>{1===e.button&&e.preventDefault()},[]);return(0,r.jsx)(T.A,{onMouseDown:g,sx:{px:3,pb:2,...e.sx},"data-testid":"repos-file-tree-container",children:s?(0,r.jsx)(T.A,{sx:{display:"flex",justifyContent:"center",p:2},children:(0,r.jsx)(H.A,{"aria-label":"Loading file tree"})}):(0,r.jsx)("nav",{"aria-label":"File Tree Navigation",children:(0,r.jsxs)(B.G,{"aria-label":"Files",children:[l&&(0,r.jsx)(er,{message:"Some files could not be loaded."}),(0,r.jsx)(et,{clientOnlyFilePaths:t,directoryItems:i,onItemSelected:e.onItemSelected,dispatchKnownFolders:x,selectedItemRef:e.selectedItemRef,onRenderRow:c,directoryNavigateOnClick:e.directoryNavigateOnClick,getItemUrl:d,getFileTrailingVisual:f,getFileIcon:h})]})})})}function er({message:e}){return(0,r.jsxs)(B.G.Item,{id:"error-tree-row",children:[(0,r.jsx)(B.G.LeadingVisual,{children:(0,r.jsx)(A.A,{icon:s.AlertFillIcon,sx:{color:"attention.fg"}})}),(0,r.jsx)(T.A,{sx:{color:"fg.muted"},children:e||"Couldn't load."})]})}try{X.displayName||(X.displayName="WrappedFileTreeRow")}catch{}try{Y.displayName||(Y.displayName="FileTreeRow")}catch{}try{Q.displayName||(Q.displayName="WrappedDirectoryTreeRow")}catch{}try{J.displayName||(J.displayName="DirectoryTreeRow")}catch{}try{ee.displayName||(ee.displayName="WrappedDirectoryContents")}catch{}try{et.displayName||(et.displayName="DirectoryContents")}catch{}try{en.displayName||(en.displayName="ReposFileTreeView")}catch{}try{er.displayName||(er.displayName="ErrorTreeRow")}catch{}var ei=n(39672);function ea({sx:e,onClick:t,textAreaId:n}){let{searchShortcut:l}=(0,a.wk)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(E.K,{unsafeDisableTooltip:!0,"aria-label":"Search this repository",icon:s.SearchIcon,"data-hotkey":l.hotkey,sx:{color:"fg.subtle",fontSize:14,fontWeight:"normal",flexShrink:0,...e},size:"medium",onClick:e=>{t?.(),(0,ei.Z)({retainScrollPosition:!0,returnTarget:e.target.closest("button")})}}),(0,r.jsx)(i._,{buttonFocusId:n,buttonHotkey:l.hotkey,onButtonClick:()=>{let e=document.getElementById(n);t?.(),(0,ei.Z)({retainScrollPosition:!0,returnTarget:e??void 0})},onlyAddHotkeyScopeButton:!0})]})}try{ea.displayName||(ea.displayName="SearchButton")}catch{}let el=N.Gy.xxxlarge;function eo({clientOnlyFilePaths:e,collapseTree:t,showTree:n,fileTree:i,treeToggleElement:a,treeToggleRef:l,onItemSelected:c,processingTime:d,searchBoxRef:f,repo:h,path:m,refInfo:v,isFilePath:O,foldersToFetch:$,id:P,onFindFilesShortcut:q,textAreaId:B,getItemUrlOverride:H,headerSx:U,paneSx:M,paneContentsSx:W,treeContainerSx:z,findFileWorkerPath:G,headerContent:K,getFileTrailingVisual:Z,getFileIcon:X,sortDirectoryItems:Y,showFindFile:Q=!0,directoryNavigateOnClick:J=!0,showRefSelectorRow:ee=!0,paneResizable:et=!0}){if(Q&&void 0===G)throw Error("findFileWorkerPath must be provided when showFindFile is true");let{openPanel:er}=(0,b.Ak)(),[ei,eo]=u.useState($.length>0),[ed,eu]=u.useState(!1),ef=u.useRef([]),eh=u.useRef(null),em=u.useRef(!1),ep=u.useRef(!1),ex=u.useRef(null),{query:ey}=(0,g.JS)(),eg=u.useRef(ey);eg.current=ey;let{codeCenterOption:eb}=(0,k.ud)(),ew=u.useRef(er),[ev]=(0,o.I)(()=>!1,!0,[]),{getItemUrl:ej}=(0,w.Z)(),eC=H||ej,eN=[],ek=new Map,eI=u.useRef(ei);!eI.current&&i&&(eN=V(i,ek,[],Y).newRootItems),eI.current=!0;let[eR,eT]=u.useReducer(es,ek),[eE,eS]=u.useState(eN);u.useEffect(()=>{n&&(!ey||window.innerWidth>=N.Gy.large)||(ex.current=null)},[n,ey]),u.useEffect(()=>{er&&ew.current!==er&&window.innerWidth<el&&t({setPreference:!1}),ew.current=er},[t,er]);let eF=u.useCallback(async e=>{let t=ej({contentType:"directory",path:e,name:e});try{let n=await (0,I.lS)(`${t}?noancestors=1`);if(n.ok){let t=await n.json(),r={items:t.payload.tree.items,totalCount:t.payload.tree.totalCount};i[e]=r}else eu(!0)}catch{eu(!0)}ef.current.push(e),ef.current.length===$.length&&eo(!1)},[i,$.length,ej]);u.useEffect(()=>{if($&&!em.current)for(let e of $)eF(e);em.current=!0},[eF,$,eR.size]);let e_=u.useCallback(e=>{n&&(!eg.current||window.innerWidth>=N.Gy.large)&&eh.current&&e&&(0,R.Rt)(e,eh.current,{endMargin:window.innerHeight/2,startMargin:window.innerHeight/2,behavior:"auto"})},[n]),eA=u.useCallback(e=>{e&&ep.current?ep.current=!1:ex.current!==e&&e_(e),ex.current=e},[e_]),eD=u.useCallback(e=>{eh.current=e,window.innerWidth>=el&&e_(ex.current)},[e_]),eL=u.useCallback(e=>{e&&e_(ex.current)},[e_]),{screenSize:eO}=(0,N.lm)(),e$=!ev&&(er&&eO<el||eO<N.Gy.xlarge)&&eO>=N.Gy.large,eP=u.useCallback(()=>{e$||c(),ep.current=!0},[c,e$]),eq=n?{}:{display:"none"},eB=O?m.substring(0,m.lastIndexOf("/")):m,eH=(0,u.useMemo)(()=>({knownFolders:eR,dispatchKnownFolders:eT}),[eR]),eU=u.useMemo(()=>ev?null:(0,D.KF)(),[ev]),eM=u.useCallback(()=>{window.innerWidth>N.Gy.large&&window.innerWidth<N.Gy.xxxxlarge&&t({setPreference:!1})},[t]),eW=(0,r.jsxs)(T.A,{id:P,sx:{maxHeight:"100%",height:"100%",display:"flex",flexDirection:"column","@media screen and (max-width: 768px)":ev?{display:"none"}:void 0,"@media screen and (min-width: 768px)":{maxHeight:"100vh",height:"100vh"},...W},children:[(0,r.jsxs)(T.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",px:3,pb:2,pt:3,...U},children:[K,ee&&(0,r.jsxs)(T.A,{sx:{mx:4,display:"flex",width:"100%"},children:[(0,r.jsx)(T.A,{sx:{flexGrow:1},children:(0,r.jsx)(y.R,{buttonClassName:"react-repos-tree-pane-ref-selector width-full ref-selector-class",allowResizing:!0})}),(0,r.jsxs)(T.A,{sx:{ml:2,whiteSpace:"nowrap","&:hover button:not(:hover)":{borderLeftColor:"var(--button-default-borderColor-hover, var(--color-btn-hover-border))"}},children:[v.canEdit&&(0,r.jsx)(_.A,{"aria-label":"Add file",direction:"s",children:(0,r.jsx)(E.K,{unsafeDisableTooltip:!0,"aria-label":"Add file",as:C.N,sx:{color:"fg.subtle",borderTopRightRadius:0,borderBottomRightRadius:0,borderRight:0},icon:s.PlusIcon,to:(0,j.IO9)({repo:h,path:eB,commitish:v.name,action:"new"}),onClick:eP})}),(0,r.jsx)(ea,{sx:v.canEdit?{borderTopLeftRadius:0,borderBottomLeftRadius:0}:void 0,onClick:eM,textAreaId:B})]})]})]}),v.currentOid&&Q&&G&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.default,{commitOid:v.currentOid,findFileWorkerPath:G,onItemSelected:c,searchBoxRef:f,sx:{ml:3,mr:3,mb:"12px","@media screen and (max-width: 768px)":ev?{display:"none"}:void 0}}),(0,r.jsx)(p,{inputRef:f,onFindFilesShortcut:q,textAreaId:B})]}),(0,r.jsx)(ec,{scrollingRef:eh}),(0,r.jsxs)(T.A,{ref:eD,sx:{flexGrow:1,maxHeight:"100% !important",overflowY:"auto","@media screen and (max-width: 768px)":ev?{display:"none"}:void 0,scrollbarGutter:"stable"},children:[ev?v.currentOid&&(0,r.jsx)("div",{className:ey?"react-tree-show-tree-items-on-large-screen":"react-tree-show-tree-items",children:(0,r.jsx)(en,{clientOnlyFilePaths:e,data:i,rootItems:eE,selectedItemRef:eA,setRootItems:eS,onItemSelected:eP,processingTime:d,loading:ei,fetchError:ed,directoryNavigateOnClick:J,getItemUrl:eC,sx:z,getFileTrailingVisual:Z,getFileIcon:X,sortDirectoryItems:Y})}):eU&&(0,r.jsx)(D.bL,{node:eU}),!v.currentOid&&!h.isEmpty&&(0,r.jsxs)(T.A,{sx:{mt:2,mx:4,mb:"12px",fontSize:1,alignItems:"center",color:"danger.fg"},children:[(0,r.jsx)(A.A,{icon:s.AlertFillIcon}),"\xa0Ref is invalid"]})]})]}),ez=e$||er?{"@media print, screen and (max-width: 1349px) and (min-width: 768px)":{display:"none"}}:{"@media print, screen and (max-width: 1011px) and (min-width: 768px)":{display:"none"}};return(0,r.jsxs)(L.Provider,{value:eH,children:[eU&&(0,r.jsx)(D.oj,{node:eU,children:v.currentOid&&(0,r.jsx)("div",{className:ey?"react-tree-show-tree-items-on-large-screen":"react-tree-show-tree-items",children:(0,r.jsx)(en,{clientOnlyFilePaths:e,data:i,directoryNavigateOnClick:J,rootItems:eE,selectedItemRef:eA,setRootItems:eS,onItemSelected:eP,processingTime:d,loading:ei,fetchError:ed,getItemUrl:eC,sx:z,getFileTrailingVisual:Z,getFileIcon:X,sortDirectoryItems:Y})})}),!n&&eb.enabled&&a&&(0,r.jsx)(T.A,{sx:{position:"absolute",p:3,display:"none","@media screen and (min-width: 1360px)":{display:"block"}},children:a}),(0,r.jsx)(S.O7.Pane,{position:"start",sticky:!0,sx:{minWidth:0,...eq,flexDirection:["column","column","inherit"],"@media screen and (min-width: 768px)":{height:"100vh",maxHeight:"100vh !important"},...ez,...M},padding:"none",width:"large",resizable:!!et,widthStorageKey:"codeView.tree-pane-width",divider:{regular:"none",narrow:"none"},children:n&&!e$&&(0,r.jsx)("div",{className:ev?er?"react-tree-pane-contents-3-panel":"react-tree-pane-contents":void 0,children:eW})}),n&&e$&&ew.current===er&&(0,r.jsx)(F.Ay,{className:ev?er?"react-tree-pane-overlay-3-panel":"react-tree-pane-overlay":void 0,ref:eL,returnFocusRef:l,onClickOutside:eM,onEscape:eM,top:0,position:"fixed",sx:{...eq,width:"440px",height:"100vh",maxHeight:"100vh",borderTopLeftRadius:0,borderBottomLeftRadius:0},children:(0,r.jsx)(r.Fragment,{children:eW})})]})}function es(e,t){switch(t.type){case"set":{let n=e?.size>0;return(0,v.BI)("file-tree",{"fetch-count":n?t.folders.size-e.size:t.folders.size,"file-count":t.folders.size,"nav-type":n?"soft":"hard","processing-time":t.processingTime}),t.folders}case"add":{let n=new Map([...e,...t.folders]);return(0,v.BI)("file-tree",{"fetch-count":t.folders.size,"file-count":n.size,"nav-type":"fetch","processing-time":t.processingTime}),n}default:throw Error(`Unknown action type: ${t.type}`)}}function ec({scrollingRef:e}){let[t,n]=u.useState(e.current&&e.current.scrollTop>0);return u.useEffect(()=>{if(e.current){let t=e.current,r=()=>{t&&t.scrollTop>0?n(!0):n(!1)};return t.addEventListener("scroll",r),()=>{t.removeEventListener("scroll",r)}}},[e]),t?(0,r.jsx)(T.A,{sx:{borderBottom:"1px solid",borderColor:"border.default",boxShadow:"0 3px 8px rgba(0, 0, 0, 0.3)"}}):null}try{eo.displayName||(eo.displayName="ReposFileTreePane")}catch{}try{ec.displayName||(ec.displayName="TreeBorder")}catch{}var ed=n(27510),eu=n(73480),ef=n(86584),eh=n(97156),em=n(51012),ep=n(84217);function ex(e,t,n,i,a,l="fileTreeExpanded",o){let{sendRepoClickEvent:s}=(0,m.T)(),c=(0,ef.i)(),d=l?(0,eu.Ri)(l):void 0,f=!(void 0!==eh.XC),p=!c&&d&&"false"!==d.value||c&&n;void 0===p&&(p=!1);let x=(0,u.useRef)(null),y=(0,u.useRef)(null),{screenSize:g}=(0,N.lm)(),[b,w]=(0,u.useState)(p),v=(0,u.useRef)(p),j=(0,u.useRef)(!1),C=(0,u.useRef)(!1),k=(0,u.useCallback)(()=>!(t.current&&window.innerWidth>=el||!t.current&&window.innerWidth>=N.Gy.xlarge),[t]);(0,em.N)(()=>{let e=k();e||(j.current=!1),w((0,ed.q)()&&g<N.Gy.large&&!C.current||(!e||j.current)&&(c&&b||!c&&d?.value!=="false"))},[j,d?.value,g,t,k,c]),(0,em.N)(()=>{let e=!t.current&&window.innerWidth<N.Gy.xlarge,n=!t.current&&window.innerWidth>=N.Gy.xlarge;e&&v.current&&!(0,ed.q)()&&b&&w(!1),n&&v.current&&!b&&w(!0)},[t,g]),(0,em.N)(()=>{let e=t.current&&window.innerWidth<el,n=t.current&&window.innerWidth>=el;e&&v.current&&!(0,ed.q)()&&b&&w(!1),n&&v.current&&!b&&w(!0)},[t]);let I=(0,u.useCallback)(e=>{if(w(!0),k()&&(j.current=!0),e?.setPreference&&(a?.(!0),v.current=!0,l)){let e=new Date(Date.now()+2592e6).toUTCString();(0,eu.TV)(l,"true",e)}e?.focus==="toggleButton"?requestAnimationFrame(()=>x.current?.focus()):e?.focus==="search"&&requestAnimationFrame(()=>y.current?.focus())},[l,2592e6,k,a]),R=(0,u.useCallback)(e=>{if(w(!1),j.current=!1,C.current=!0,e?.setPreference&&(a?.(!1),v.current=!1,l)){let e=new Date(Date.now()+2592e6).toUTCString();(0,eu.TV)(l,"false",e)}e?.focus==="toggleButton"&&requestAnimationFrame(()=>x.current?.focus())},[l,2592e6,a]),T=(0,u.useCallback)(e=>e&&window.innerWidth>=el||!t.current&&window.innerWidth>=N.Gy.xlarge,[t]),E=(0,u.useMemo)(()=>(0,r.jsx)(ep.A,{as:"h2",sx:{display:"flex",fontSize:1},children:(0,r.jsx)(h,{expanded:b,ariaControls:e,onToggleExpanded:()=>{s(b?"FILES_TREE.HIDE":"FILES_TREE.SHOW"),b?R({focus:"toggleButton",setPreference:T(t.current)}):I({focus:"toggleButton",setPreference:T(t.current)})},className:void 0!==d||b||f?void 0:"react-tree-toggle-button-with-indicator",ref:x,textAreaId:i,...o})}),[b,e,d,f,i,o,s,R,T,t,I]);return{isTreeExpanded:b,expandTree:I,collapseTree:R,treeToggleElement:E,treeToggleRef:x,searchBoxRef:y}}},27500:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(96540);function i({focusRowRef:e,mouseRowRef:t}){let[n,i]=r.useState(!1);return r.useEffect(()=>{if(e.current&&t.current){let n=()=>{let t=e.current?.querySelector(".PRIVATE_TreeView-item-content-text");t?.scrollWidth!==t?.offsetWidth&&i(!0)};e.current.onfocus=()=>{n()},e.current.onblur=()=>{i(!1)},t.current.onmouseenter=()=>{n()},t.current.onmouseleave=()=>{i(!1)}}},[e,t]),n}},96810:(e,t,n)=>{n.d(t,{E:()=>a});var r=n(74848),i=n(89537);function a({children:e}){return(0,i.P)()?(0,r.jsx)(r.Fragment,{children:e}):null}try{a.displayName||(a.displayName="AllShortcutsEnabled")}catch{}},28910:(e,t,n)=>{n.d(t,{_:()=>i});var r=n(74848);function i({buttonFocusId:e,buttonHotkey:t,onButtonClick:n,buttonTestLabel:i,onlyAddHotkeyScopeButton:a}){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{hidden:!0,"data-testid":i||"","data-hotkey":t,onClick:n,"data-hotkey-scope":e}),!a&&(0,r.jsx)("button",{hidden:!0,"data-hotkey":t,onClick:n})]})}try{i.displayName||(i.displayName="DuplicateOnKeydownButton")}catch{}},42573:(e,t,n)=>{n.d(t,{R:()=>f});var r=n(74848),i=n(89504),a=n(83056),l=n(58143),o=n(54156),s=n(96540),c=n(57294),d=n(62353),u=n(61836);function f({size:e,buttonClassName:t,allowResizing:n,idEnding:f}){let h=(0,i.t)(),{refInfo:m,path:p,action:x}=(0,c.eu)(),y=function(){let{addToast:e}=(0,o.Y6)();return(0,s.useCallback)(t=>e({type:"error",message:t}),[e])}(),{sendRepoClickEvent:g}=(0,u.T)(),{refSelectorShortcut:b}=(0,d.wk)();return(0,r.jsx)(l.PI,{currentCommitish:m.name,defaultBranch:h.defaultBranch,owner:h.ownerLogin,repo:h.name,canCreate:h.currentUserCanPush,cacheKey:m.listCacheKey,selectedRefType:m.refType,getHref:e=>`${(0,a.IO9)({repo:h,commitish:e,action:x,path:p})}${window.location.search}`,hotKey:b.hotkey,onBeforeCreate:e=>g("REF_SELECTOR_MENU.CREATE_BRANCH",{ref_name:e}),onCreateError:y,onOpenChange:e=>e&&g("REF_SELECTOR_MENU"),size:e,buttonClassName:t,allowResizing:n,idEnding:f||"repos-header-ref-selector",useFocusZone:!0})}try{f.displayName||(f.displayName="ReposHeaderRefSelector")}catch{}},28610:(e,t,n)=>{n.r(t),n.d(t,{FileResultRow:()=>P,default:()=>O});var r=n(74848),i=n(43772),a=n(57294),l=n(61836),o=n(18704),s=n(89504),c=n(6032),d=n(83056),u=n(56226),f=n(42024),h=n(27788),m=n(69676),p=n(38621),x=n(82678),y=n(75177),g=n(65481),b=n(16823),w=n(34614),v=n(85349),j=n(38553),C=n(30729),N=n(91385),k=n(96540),I=n(37363),R=n(5225);let T=(0,R.A)(N.fN);function E({data:e}){let{query:t,baseList:n,startTime:r}=e,i=t.replaceAll("\\","");return{query:t,list:n.filter(e=>""===i||(0,N.qA)(i,e)&&T(i,e)>0).sort((e,t)=>T(i,t)-T(i,e)),baseCount:n.length,startTime:r}}var S=n(27510),F=n(28784);async function _(e){let t=await (0,F.lS)(e);return t.ok?await t.json():void 0}let A=new Map,D=(0,R.A)(_,{cache:A}),L={excludeDirectories:!1,excludeSeeAllResults:!1};function O({actionListSx:e={},additionalResults:t,commitOid:n,config:u=L,findFileWorkerPath:p,getItemUrl:j,onRenderRow:C,onItemSelected:N,searchBoxRef:R,sx:T={}}){let{excludeDirectories:F,excludeSeeAllResults:_}=u,{query:A,setQuery:O}=(0,i.JS)(),P=(0,s.t)(),q=k.useRef(null),B=R??q,[U,M]=k.useState(A.length>0),[W,z]=k.useState(!!A),{list:G,directories:K,loading:V,error:Z}=function(e,t,n){let r=(0,s.t)(),[i,a]=(0,k.useState)({list:[],directories:[],loading:!0}),l=(0,d.ClY)({repo:r,commitOid:e,includeDirectories:!n});return(0,k.useEffect)(()=>{let e=!1,n=async()=>{a({list:[],directories:[],loading:!0});let t=await D(l);if(e)return;let n=t?.paths||[],r=t?.directories||[];a({list:n.concat(r).sort(),directories:r,error:!t})};return t&&n(),function(){e=!0}},[l,t,n]),i}(n,U,!!F),{path:X}=(0,a.eu)(),{getUrl:Y}=(0,o.Z)(),{queryText:Q,queryLine:J}=function(e){let t=(e=e.replaceAll(" ","")).indexOf(":");return t>=0?{queryText:e.substring(0,t),queryLine:parseInt(e.substring(t+1),10)}:{queryText:e,queryLine:void 0}}(A),{matches:ee,clearMatches:et}=function(e,t,n,r){let[i,a]=k.useState(),o=k.useRef(""),s=k.useRef(),{sendStats:c}=(0,l.T)(),d=k.useRef(!1),u=k.useCallback(()=>{let e=new I.z(n,E);e.onmessage=({data:e})=>{d.current=!1,a(e.list),o.current=e.query,e.startTime&&c("repository.find-file",{"find-file-base-count":e.baseCount,"find-file-results-count":e.list.length,"find-file-duration-ms":performance.now()-e.startTime})},s.current=e},[c,n]);return k.useEffect(()=>{if(r)return u(),function(){s.current?.terminate()}},[u,r]),k.useEffect(()=>{if(e.length&&t){d.current&&(s.current?.terminate(),u());let n=o.current&&t.startsWith(o.current);d.current=!0,s.current?.postMessage({baseList:n&&i||e,query:t,startTime:performance.now()})}},[e,t,u]),{matches:i,clearMatches:()=>a(void 0)}}((0,k.useMemo)(()=>[...G,...t??[]].sort(),[t,G]),Q,p,U),{sendRepoClickEvent:en}=(0,l.T)(),er=(0,h.Z)(),[ei,ea]=k.useState(0),[el,eo]=k.useState(()=>(0,S.q)()),es=k.useRef(null),ec=k.useRef(null),ed="file-results-list",{sendRepoKeyDownEvent:eu}=(0,l.T)(),{screenSize:ef}=(0,f.lm)(),eh=u.enableOverlay??ef>=f.Gy.large,em=k.useCallback(()=>{en("FILE_TREE.SEARCH_RESULT_CLICK"),N?.(),z(!1)},[en,N]),ep=(e,t,n)=>j?j(e,t,n):Y({path:e,action:t?"tree":"blob",hash:n}),{containerRef:ex}=(0,x.G)({bindKeys:m.z0.ArrowVertical|m.z0.HomeAndEnd,focusInStrategy:"previous"},[V,Z]);k.useEffect(()=>{A||z(!1)},[A]),k.useEffect(()=>{document.activeElement!==B.current&&eh&&z(!1)},[X,B,eh]);let ey=ee?.slice(0,40)||[],eg=ee&&ee.length>ey.length,eb=(0,r.jsx)(y.A,{sx:{maxHeight:eh?"60vh":"100% !important",overflowY:"auto",scrollbarGutter:"stable",maxWidth:"100vw","@media (max-width: 768px)":{ml:3,mr:2}},children:Z?(0,r.jsx)(g.A,{variant:"danger",className:"m-3",children:"Failed to search"}):(0,r.jsxs)(b.l,{ref:ex,sx:{overflow:"auto",p:eh?2:3,width:"100%",pr:eh?3:0,pt:eh?3:"2px !important",...e},role:"listbox",children:[!V&&ey.map((e,t)=>{let n=K.includes(e),i=ep(e,n,J?`L${J}`:"");return(0,r.jsx)(H,{active:e===X,index:t,focused:el&&ei===t,match:e,onRender:C,query:Q,onClick:em,isDirectory:n,to:i,useOverlay:eh,listRef:ex},e)}),(0,r.jsxs)("div",{className:"m-3 text-center",children:[(0,r.jsx)($,{loading:V||!ee,visibleResultCount:ey.length,truncated:!!eg}),eg&&!_&&(0,r.jsxs)(r.Fragment,{children:["\xa0",(0,r.jsx)(w.A,{id:"see-all-results-link",className:"focus-visible",ref:es,href:(0,d.Y8Y)({owner:P.ownerLogin,repo:P.name,searchTerm:`path:${Q}`}),sx:el&&ei===ey.length?{outline:"2px solid var(--focus-outlineColor, var(--color-accent-fg))",outlineOffset:"-2px",boxShadow:"none"}:{},children:"See all results"})]})]})]})});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y.A,{ref:ec,sx:{mx:2,...T},children:(0,r.jsx)(S.Z,{ariaActiveDescendant:(!eh&&A||eh&&W)&&el&&ei>-1?eg&&ei===ey.length?"see-all-results-link":`file-result-${ei}`:void 0,ariaExpanded:eh?W:void 0,ariaHasPopup:eh,ariaControls:eh?ed:void 0,ref:B,query:A,onKeyDown:e=>{let{key:t,shiftKey:n,metaKey:r,altKey:i,ctrlKey:a}=e;if(!n&&!r&&!i){if("Escape"===t)A?(eu("FILE_TREE.CANCEL_SEARCH"),O(""),et()):document.activeElement&&document.activeElement.blur();else if(!A)return;else if("Enter"===t)!_&&eg&&ei===ey.length?(er((0,d.Y8Y)({owner:P.ownerLogin,repo:P.name,searchTerm:`path:${Q}`})),N?.()):ey[ei]&&(er(ep(ey[ei],!1,J?`L${J}`:"")),z(!1),N?.());else if("ArrowDown"===t||a&&"n"===t){if(!_&&eg&&ei>=ey.length-1){if(ea(ey.length),es.current&&ex.current){let e=(0,c.U)(ex.current);(0,m.Rt)(es.current,e,{behavior:"instant"})}}else ea(Math.min(ei+1,ey.length-1));e.preventDefault();return}else if("ArrowUp"===t||a&&"p"===t){ea(Math.max(ei-1,0)),e.preventDefault();return}}},onPreload:()=>M(!0),onSearch:e=>{O(e),e?z(!0):(et(),z(!1)),ea(0)},onBlur:e=>{ex.current?.contains(e.relatedTarget)||(z(!1),eo(!1))},onFocus:()=>{A&&z(!0),eo(!0)},sx:{minWidth:"160px"}})}),eh&&(0,r.jsx)(v.T,{anchorRef:ec,open:eh&&W,renderAnchor:null,onClose:()=>{z(!1)},focusZoneSettings:{disabled:!0},focusTrapSettings:{disabled:!0},width:"xlarge",align:"end",overlayProps:{id:ed,role:"dialog"},children:eb}),!eh&&A&&eb]})}function $({visibleResultCount:e,truncated:t,loading:n}){return(0,r.jsx)("span",{role:"status",className:n||t||0===e?void 0:"sr-only","aria-label":n?"Loading":void 0,children:n?(0,r.jsx)(j.A,{size:"large"}):0===e?"No matches found":t?`First ${e} files shown.`:`Showing ${e} files.`},"results-count-status")}let P=({active:e,focused:t,index:n,match:i,query:a,to:l,isDirectory:o,onClick:s,onRender:d,useOverlay:f,listRef:h})=>{let p=(0,N.Xq)(a,i);d?.();let x=k.useRef(null),g=o?q:B;k.useEffect(()=>{if(t&&x.current&&h?.current){let e=(0,c.U)(h.current);(0,m.Rt)(x.current,e,{behavior:"instant"})}},[t,h]);let w={};return t&&(w={outline:"none",border:"2 solid",boxShadow:"0 0 0 2px #0969da"}),(0,r.jsx)(b.l.Item,{id:`file-result-${n}`,ref:x,as:u.N,onSelect:s,to:l,active:e,sx:{fontWeight:"normal",":hover":{textDecoration:"none"},mx:"2px",width:"calc(100% - 4px)",...w},role:"option","data-focus-visible-added":t||void 0,tabIndex:f?-1:0,children:(0,r.jsxs)("div",{className:"d-flex",children:[(0,r.jsx)("div",{className:"d-flex flex-1 flex-column overflow-hidden",children:(0,r.jsx)(U,{text:i,positionsList:p,sx:{color:"fg.muted"},LeadingIcon:g})}),t&&(0,r.jsx)(y.A,{sx:{pl:1,whiteSpace:"nowrap",color:"fg.muted"},children:`Go to ${o?"folder":"file"}`})]})},i)},q=()=>(0,r.jsx)(C.A,{"aria-label":"Directory",icon:p.FileDirectoryFillIcon,sx:{color:"var(--treeViewItem-leadingVisual-iconColor-rest, var(--color-icon-directory))",mr:2},size:"small"}),B=()=>(0,r.jsx)(C.A,{"aria-label":"File",icon:p.FileIcon,className:"fgColor-muted mr-2",size:"small"}),H=k.memo(P);function U({text:e,positionsList:t,sx:n,LeadingIcon:i}){let a=[],l=0;for(let n of t){if(Number(n)!==n||n<l||n>e.length)continue;let t=e.slice(l,n);t&&a.push(M(t)),l=n+1,a.push((0,r.jsx)("mark",{className:"text-bold bgColor-transparent fgColor-default",children:e[n]},n))}return a.push(M(e.slice(l))),(0,r.jsx)(y.A,{sx:n,children:(0,r.jsxs)(r.Fragment,{children:[i&&(0,r.jsx)(i,{}),a]})})}function M(e){return e.replaceAll("/","/\u200B")}try{O.displayName||(O.displayName="FileResultsList")}catch{}try{$.displayName||($.displayName="FileResultsStatus")}catch{}try{P.displayName||(P.displayName="FileResultRow")}catch{}try{q.displayName||(q.displayName="DirectoryIcon")}catch{}try{B.displayName||(B.displayName="FileResultIcon")}catch{}try{H.displayName||(H.displayName="MemoizedFileResultRow")}catch{}try{U.displayName||(U.displayName="HighlightMatch")}catch{}},27510:(e,t,n)=>{n.d(t,{Z:()=>f,q:()=>h});var r=n(74848),i=n(70170),a=n(96810),l=n(61836),o=n(97156),s=n(38621),c=n(67749),d=n(75177),u=n(96540);let f=u.forwardRef(({ariaActiveDescendant:e,ariaControls:t,ariaExpanded:n,ariaHasPopup:o,onBlur:f,onFocus:m,onKeyDown:p,onPreload:x,onSearch:y,query:g,sx:b={}},w)=>{let{sendRepoClickEvent:v}=(0,l.T)(),[j,C]=u.useState(g),N=u.useRef((0,i.s)(e=>y(e),250));u.useEffect(()=>{C(g)},[g]);let k=g?(0,r.jsx)(c.A.Action,{onClick:()=>{v("FILE_TREE.CANCEL_SEARCH"),y("")},icon:s.XCircleFillIcon,"aria-label":"Clear",className:"fgColor-muted"}):void 0;return(0,r.jsx)(c.A,{autoFocus:h(),ref:w,value:j,onKeyDown:p,onChange:e=>{C(e.target.value),x(),N.current(e.target.value)},sx:{display:"flex",...b},"aria-label":"Go to file","aria-activedescendant":e,role:o?"combobox":void 0,"aria-controls":t,"aria-expanded":n,"aria-haspopup":o?"dialog":void 0,autoCorrect:"off",spellCheck:"false",placeholder:"Go to file",leadingVisual:s.SearchIcon,trailingAction:k,trailingVisual:k?void 0:()=>(0,r.jsx)(a.E,{children:(0,r.jsx)(d.A,{sx:{mr:"-6px"},children:(0,r.jsx)("kbd",{children:"t"})})}),onFocus:e=>{x(),e.target.select(),m?.(e)},onBlur:f,onClick:()=>v("FILE_TREE.SEARCH_BOX")})});function h(){return"1"===new URLSearchParams(o.fV.search).get("search")}f.displayName="FilesSearchBox"},89537:(e,t,n)=>{n.d(t,{$:()=>l,P:()=>o});var r=n(74848),i=n(96540);let a=i.createContext(!0);function l({allShortcutsEnabled:e,children:t}){return(0,r.jsxs)(a.Provider,{value:e,children:[" ",t," "]})}function o(){return i.useContext(a)}try{a.displayName||(a.displayName="AllShortcutsEnabledContext")}catch{}try{l.displayName||(l.displayName="AllShortcutsEnabledProvider")}catch{}},43772:(e,t,n)=>{n.d(t,{Ck:()=>o,JS:()=>l});var r=n(74848),i=n(96540);let a=(0,i.createContext)({query:"",setQuery:()=>void 0});function l(){return(0,i.useContext)(a)}function o({children:e}){let[t,n]=(0,i.useState)(""),l=(0,i.useMemo)(()=>({query:t,setQuery:n}),[n,t]);return(0,r.jsx)(a.Provider,{value:l,children:e})}try{a.displayName||(a.displayName="FileQueryContext")}catch{}try{o.displayName||(o.displayName="FileQueryProvider")}catch{}},57294:(e,t,n)=>{n.d(t,{eu:()=>s,qV:()=>o,sq:()=>c});var r=n(74848),i=n(73627),a=n(96540);let l=a.createContext({});function o({children:e,...t}){return(0,r.jsx)(l.Provider,{value:t,children:e})}function s(){return a.useContext(l)}function c(){return(0,i.X)()}try{l.displayName||(l.displayName="FilesPageInfoContext")}catch{}try{o.displayName||(o.displayName="FilesPageInfoProvider")}catch{}},20864:(e,t,n)=>{n.d(t,{Ak:()=>f,cD:()=>u,iK:()=>d});var r=n(74848),i=n(42661),a=n(86584),l=n(74572),o=n(42024),s=n(96540);let c=(0,l.A)("localStorage"),d=(0,s.createContext)({openPanel:void 0,setOpenPanel:()=>void 0});function u({children:e,payload:t,openPanelRef:n}){let l="blame"in t,u=(0,i.Hf)(t),f=(0,a.i)(),h=(0,s.useRef)(),[m,p]=(0,s.useState)(()=>{let e=c.getItem("codeNavOpen");if(!f&&""!==e&&null!==e||f&&t.symbolsExpanded)return"codeNav"}),x=(l||u)&&"codeNav"===m?void 0:m;s.useEffect(()=>{n.current=x},[x,n]);let y=(0,s.useCallback)((e,t)=>{p(n=>(n&&h.current&&h.current.focus(),h.current=t,l||u&&"codeNav"===e?void 0:e))},[l,u]);!function(e){let{screenSize:t}=(0,o.lm)(),n=(0,s.useRef)(t);(0,s.useEffect)(()=>{let r=n.current>=o.Gy.large,i=n.current===t;t<o.Gy.large&&(r||i)&&e(void 0),n.current=t},[t,e])}(y);let g=(0,s.useMemo)(()=>({openPanel:x,setOpenPanel:y}),[x,y]);return(0,r.jsx)(d.Provider,{value:g,children:e})}function f(){return(0,s.useContext)(d)}try{d.displayName||(d.displayName="OpenPanelContext")}catch{}try{u.displayName||(u.displayName="OpenPanelProvider")}catch{}},73560:(e,t,n)=>{n.d(t,{u:()=>l});var r=n(74848),i=n(20053);let a={diffSquare:"DiffSquares-module__diffSquare--h5kjy",addition:"DiffSquares-module__addition--jeNtt",deletion:"DiffSquares-module__deletion--hKV3q",neutral:"DiffSquares-module__neutral--VlyoP"};function l({squares:e}){return(0,r.jsx)("div",{className:"d-flex",children:e.map((e,t)=>(0,r.jsx)("div",{"data-testid":`${e} diffstat`,className:(0,i.$)(a.diffSquare,a[e])},t))})}try{l.displayName||(l.displayName="DiffSquares")}catch{}},97394:(e,t,n)=>{n.d(t,{z:()=>o});var r=n(74848),i=n(94977),a=n(73560);let l={addition:"addition",deletion:"deletion",neutral:"neutral"};function o({linesAdded:e=0,linesDeleted:t=0,linesChanged:n=0,tooltipDirection:o}){if(!e&&!t&&!n||0===n)return null;let{greenSquares:s,redSquares:c,graySquares:d}=function(e,t,n){let r=n>5?5/n:1,i=Math.floor(e*r),a=Math.floor(t*r);return{greenSquares:i,redSquares:a,graySquares:5-i-a}}(e,t,n),u=[...Array(s).fill(l.addition),...Array(c).fill(l.deletion),...Array(d).fill(l.neutral)];return(0,r.jsxs)("div",{className:"d-flex flex-items-center gap-1 pl-1",children:[e>0&&(0,r.jsxs)("span",{className:"f6 text-bold fgColor-success",children:["+",e]}),t>0&&(0,r.jsxs)("span",{className:"f6 text-bold fgColor-danger",children:["-",t]}),(0,r.jsx)(i.A,{"aria-label":function({linesAdded:e,linesChanged:t,linesDeleted:n}){return`${t} ${1===t?"change":"changes"}: ${e} ${1===e?"addition":"additions"} & ${n} ${1===n?"deletion":"deletions"}`}({linesAdded:e,linesChanged:n,linesDeleted:t}),direction:o??"e",children:(0,r.jsx)(a.u,{squares:u})})]})}try{o.displayName||(o.displayName="DiffStats")}catch{}},35558:(e,t,n)=>{n.d(t,{L:()=>s});var r=n(74848),i=n(38621),a=n(87330),l=n(94977),o=n(20053);let s=n(96540).forwardRef(({expanded:e,testid:t,ariaLabel:n,ariaControls:s,onToggleExpanded:c,alignment:d,dataHotkey:u,className:f,tooltipDirection:h,variant:m},p)=>(0,r.jsx)(l.A,{"aria-label":n,id:`expand-button-${t}`,direction:h,children:(0,r.jsx)(a.K,{unsafeDisableTooltip:!0,ref:p,"data-testid":e?`collapse-${t}`:`expand-${t}`,"aria-labelledby":`expand-button-${t}`,"aria-expanded":e,"aria-controls":s,icon:e?"left"===d?i.SidebarExpandIcon:i.SidebarCollapseIcon:"left"===d?i.SidebarCollapseIcon:i.SidebarExpandIcon,"data-hotkey":u,onClick:e=>{c(e)},variant:m??"invisible",className:(0,o.$)(f,"fgColor-muted")})}));s.displayName="ExpandButton"},51489:(e,t,n)=>{n.d(t,{c9:()=>w,_$:()=>g,iU:()=>b,tV:()=>y});var r=n(74848),i=n(55847),a=n(34614),l=n(30729),o=n(38621),s=n(92240),c=n(71312),d=n(96540),u=n(54156),f=n(28784);let h=async(e,t,n)=>{try{return(await (0,f.DI)(e,{method:t,body:n})).ok}catch{return!1}},m=(e,t)=>h(e,"DELETE",x(t)),p=(e,t)=>h(e,"POST",x(t)),x=e=>{let t=new FormData;return t.append("feature",e),t};function y(e){let{alreadyRequested:t=!1,dismissed:n=!1,dismissedAt:r="",featureName:i="",requestPath:a=""}=e??{},[l,o]=(0,d.useState)(!1),[s,c]=(0,d.useState)(t),{addToast:f}=(0,u.Y6)(),h=async()=>{o(!0),await (s?m:p)(a,i)?c(!s):f({type:"error",message:"Something went wrong. Please try again later."}),o(!1)};return{inProgress:l,requested:s,dismissed:n,dismissedAt:r,toggleFeatureRequest:h}}function g({featureRequestInfo:e,learnMorePath:t,requestMessage:n,requestedMessage:i}){let{inProgress:a,requested:l,toggleFeatureRequest:o}=y(e);return e.showFeatureRequest?l?(0,r.jsx)(w,{inProgress:a,toggleFeatureRequest:o,requestedMessage:i}):(0,r.jsx)(b,{inProgress:a,toggleFeatureRequest:o,isEnterpriseRequest:e.isEnterpriseRequest,featureName:e.featureName,billingEntityId:e.billingEntityId,learnMorePath:t,requestMessage:n}):null}let b=({inProgress:e,toggleFeatureRequest:t,billingEntityId:n="",isEnterpriseRequest:i=!1,featureName:a,learnMorePath:l,requestMessage:o})=>{let{sendClickAnalyticsEvent:s}=(0,c.S)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v,{onClick:()=>{t();let e=i&&n?`ref_cta:ask_enterprise_owners_for_access;ref_loc:${a};enterprise_id:${n};`:`ref_cta:ask_admin_for_access;ref_loc:${a};`;s({category:"member_feature_request",action:`action.${a}`,label:e})},inProgress:e,isEnterpriseRequest:i}),o&&(0,r.jsx)(C,{message:o}),l&&(0,r.jsx)(j,{onClick:()=>{s({category:"suggestion",action:"click_to_read_docs",label:`ref_cta:learn_more;ref_loc:${a};`})},path:l})]})},w=({inProgress:e,toggleFeatureRequest:t,requestedMessage:n})=>(0,r.jsxs)(r.Fragment,{children:[n&&(0,r.jsx)(N,{message:n}),(0,r.jsx)(k,{onClick:t,inProgress:e})]}),v=({onClick:e,inProgress:t,isEnterpriseRequest:n})=>(0,r.jsx)(i.Q,{onClick:e,variant:"primary",disabled:t,...(0,s.G)("feature-request-request-button"),children:t?"Requesting...":n?"Ask enterprise owners for access":"Ask admin for access"}),j=({onClick:e,path:t})=>(0,r.jsx)(a.A,{href:t,onClick:e,...(0,s.G)("feature-request-learn-more-link"),children:"Learn more"}),C=({message:e})=>(0,r.jsx)("span",{children:e}),N=({message:e})=>(0,r.jsxs)("span",{className:"d-inline-block color-fg-subtle mr-1",children:[(0,r.jsx)(l.A,{icon:o.CheckIcon}),e]}),k=({onClick:e,inProgress:t})=>(0,r.jsx)(a.A,{className:"color-fg-danger text-semibold",as:"button",onClick:e,disabled:t,...(0,s.G)("feature-request-cancel-link"),children:t?"Cancelling...":"Remove request"});try{g.displayName||(g.displayName="FeatureRequest")}catch{}try{b.displayName||(b.displayName="RequestFeature")}catch{}try{w.displayName||(w.displayName="CancelFeatureRequest")}catch{}try{v.displayName||(v.displayName="RequestCTA")}catch{}try{j.displayName||(j.displayName="LearnMore")}catch{}try{C.displayName||(C.displayName="RequestMessage")}catch{}try{N.displayName||(N.displayName="RequestedMessage")}catch{}try{k.displayName||(k.displayName="RemoveRequestCTA")}catch{}},18212:(e,t,n)=>{n.d(t,{T2:()=>s,cp:()=>h,ud:()=>p});var r=n(74848),i=n(74572),a=n(96540);let l=(0,i.A)("localStorage"),o="codeView.codeFolding",s="codeView.codeWrapping",c="codeView.centerView",d="codeView.openSymbolsOnClick",u=new Map([[o,"Show code folding buttons"],[s,"Wrap lines"],[c,"Center content"],[d,"Open symbols on click"]]),f=(0,a.createContext)({codeFoldingOption:{},codeWrappingOption:{},codeCenterOption:{},openSymbolsOption:{}}),h=({children:e})=>{let t=m(o,!0),n=m(s,!1),i=m(c,!1),l=m(d,!0),u=(0,a.useMemo)(()=>({codeFoldingOption:t,codeWrappingOption:n,codeCenterOption:i,openSymbolsOption:l}),[t,n,i,l]);return(0,r.jsx)(f.Provider,{value:u,children:e})};function m(e,t){let n=l.getItem(e),[r,i]=(0,a.useState)(()=>n?"true"===n:t),o=u.get(e)||"";return{name:e,enabled:r,setEnabled:i,label:o}}function p(){return(0,a.useContext)(f)}try{f.displayName||(f.displayName="CodeViewOptionsContext")}catch{}try{h.displayName||(h.displayName="CodeViewOptionsProvider")}catch{}}}]);
//# sourceMappingURL=ui_packages_code-view-shared_hooks_use-canonical-object_ts-ui_packages_code-view-shared_utili-228da6-a3468c2264f7.js.map